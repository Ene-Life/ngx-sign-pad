{"version":3,"file":"ngx-sign-pad.umd.js.map","sources":["ng://ngx-sign-pad/lib/models/image-type.enum.ts","ng://ngx-sign-pad/lib/sign-pad.component.ts","ng://ngx-sign-pad/lib/canvas-resize.directive.ts","ng://ngx-sign-pad/lib/sign-pad.module.ts"],"sourcesContent":["export enum EImageType {\r\n    PNG = 'image/png',\r\n    SVG = 'image/svg+xml',\r\n    JPEG = 'image/jpeg'\r\n  }","import { Component, ViewChild, ElementRef, AfterContentInit, EventEmitter, Output, Input, OnChanges } from '@angular/core';\r\nimport SignaturePad from 'signature_pad';\r\nimport { EImageType } from './models/image-type.enum';\r\nimport { SignaturePadOptions } from './models/signaturePadOptions';\r\n\r\n@Component({\r\n  selector: 'ngx-sign-pad',\r\n  template: `<canvas #canvasElement libCanvasResize [debounceTime]=\"options?.debounceTime\" [signaturePad]=\"signaturePad\"></canvas>`,\r\n  styles: [`\r\n  :host {\r\n    position: relative;\r\n    display: inline-block;\r\n    box-sizing: border-box;\r\n  }\r\n  :host canvas {\r\n    position: relative;\r\n    height: 100%;\r\n    width: 100%;\r\n  }\r\n  `]\r\n})\r\nexport class SignPadComponent implements AfterContentInit {\r\n\r\n  @Input() signature: string;\r\n  @Output() signatureChange = new EventEmitter<string>();\r\n\r\n  @Input() type: EImageType | string;\r\n  @Input() set options(value: SignaturePadOptions) {\r\n    Object.assign(this._options, value);\r\n  };\r\n\r\n  get options() : SignaturePadOptions {\r\n    return this._options;\r\n  }\r\n\r\n  @ViewChild('canvasElement') canvasElementRef: ElementRef<HTMLCanvasElement>;\r\n\r\n  public signaturePad: SignaturePad;\r\n  private _options: SignaturePadOptions;\r\n\r\n  constructor() {\r\n    this._options = {\r\n      dotSize: 1,\r\n      minWidth: 1,\r\n      maxWidth: 2,\r\n      penColor: 'rgb(0, 0, 0)',\r\n      debounceTime: 10\r\n    };\r\n  }\r\n\r\n  ngAfterContentInit() {\r\n    this.signaturePad = new SignaturePad(this.canvasElementRef.nativeElement, this.options);\r\n    this.signaturePad.onEnd = () => {\r\n      this.signatureChange.emit(this.signaturePad.toDataURL(this.type));\r\n    };\r\n  }\r\n\r\n  clear(){\r\n    this.signaturePad.clear();\r\n    this.signatureChange.emit(this.signaturePad.toDataURL(this.type));\r\n  }\r\n\r\n}\r\n","import {\r\n  Directive,\r\n  AfterViewInit,\r\n  Renderer2,\r\n  ElementRef,\r\n  Input\r\n} from '@angular/core';\r\nimport SignaturePad from 'signature_pad';\r\nimport { EImageType } from './models/image-type.enum';\r\n\r\n@Directive({\r\n  selector: '[libCanvasResize]'\r\n})\r\nexport class CanvasResizeDirective implements AfterViewInit {\r\n\r\n  @Input() private signaturePad: SignaturePad;\r\n  @Input() private debounceTime?: number;\r\n\r\n  constructor(private canvasElementRef: ElementRef<HTMLCanvasElement>, private renderer: Renderer2) {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.renderer.listen(window, 'resize', () => {\r\n      const currentSignature = this.signaturePad.toDataURL(EImageType.PNG);\r\n      setTimeout(() => {\r\n        this.resizeCanvas();\r\n        this.signaturePad.clear();\r\n        const canvas = this.canvasElementRef.nativeElement;\r\n        this.signaturePad.fromDataURL(currentSignature,\r\n          {\r\n            ratio: Math.max(window.devicePixelRatio || 1, 1),\r\n            height: parseFloat(canvas.getAttribute('height')),\r\n            width: parseFloat(canvas.getAttribute('width'))\r\n          },\r\n          (error) => {\r\n            if (error) {\r\n              this.signaturePad.clear();\r\n            }\r\n          });\r\n      }, this.debounceTime | 100);\r\n    });\r\n    this.resizeCanvas();\r\n  }\r\n\r\n  private resizeCanvas(initial: boolean = false) {\r\n    const canvas = this.canvasElementRef.nativeElement;\r\n    const container = this.renderer.parentNode(canvas);\r\n    const ratio = Math.max(window.devicePixelRatio || 1, 1);\r\n\r\n    if (container.offsetHeight && container.offsetWidth) {\r\n      this.renderer.setAttribute(canvas, 'width', (container.offsetWidth * ratio).toString());\r\n      this.renderer.setAttribute(canvas, 'height', (container.offsetHeight * ratio).toString());\r\n      canvas.getContext('2d').scale(ratio, ratio);\r\n    } else if (initial) {\r\n      setTimeout(() => { this.resizeCanvas(true) }, this.debounceTime | 100);\r\n    }\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { SignPadComponent } from './sign-pad.component';\r\nimport { CanvasResizeDirective } from './canvas-resize.directive';\r\n\r\n@NgModule({\r\n  declarations: [SignPadComponent, CanvasResizeDirective],\r\n  imports: [\r\n  ],\r\n  exports: [SignPadComponent]\r\n})\r\nexport class SignPadModule { }\r\n"],"names":["EventEmitter","Component","Input","Output","ViewChild","Directive","ElementRef","Renderer2","NgModule"],"mappings":"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"}
